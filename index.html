<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rifa Franklin Monsalve - $1.000.000</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, sans-serif;
        }
        /* Mejoras para mobile */
        .number-grid {
            grid-template-columns: repeat(5, 1fr);
        }
        @media (min-width: 640px) {
            .number-grid {
                grid-template-columns: repeat(10, 1fr);
            }
        }
        .number-button {
            min-height: 44px; /* Tama√±o m√≠nimo para touch */
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-900 via-purple-800 to-indigo-900 min-h-screen">
    <div id="app"></div>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function TalonarioRifa() {
            const [selectedNumbers, setSelectedNumbers] = useState(new Set());
            const [soldNumbers, setSoldNumbers] = useState(new Set());
            const [showTicket, setShowTicket] = useState(false);
            const [currentTicket, setCurrentTicket] = useState(null);
            const [showForm, setShowForm] = useState(false);
            const [formData, setFormData] = useState({
                nombre: '',
                apellido: '',
                telefono: '',
                email: ''
            });
            const [ticketData, setTicketData] = useState({});
            const [pendingNumbers, setPendingNumbers] = useState(new Set());
            const [showAdminPanel, setShowAdminPanel] = useState(false);
            const [adminPassword, setAdminPassword] = useState('');
            const [isAdmin, setIsAdmin] = useState(false);
            const [lastSale, setLastSale] = useState(null);

            // CONTRASE√ëA DEL ADMINISTRADOR - C√ÅMBIALA POR UNA SEGURA
            const ADMIN_PASSWORD = "Franklin2024"; // ‚ö†Ô∏è CAMBIA ESTA CONTRASE√ëA

            // Cargar datos guardados al iniciar
            useEffect(() => {
                const savedSoldNumbers = localStorage.getItem('rifaSoldNumbers');
                const savedTicketData = localStorage.getItem('rifaTicketData');
                const savedAdmin = localStorage.getItem('rifaAdmin');
                
                if (savedSoldNumbers) {
                    setSoldNumbers(new Set(JSON.parse(savedSoldNumbers)));
                }
                if (savedTicketData) {
                    setTicketData(JSON.parse(savedTicketData));
                }
                if (savedAdmin) {
                    setIsAdmin(JSON.parse(savedAdmin));
                }
            }, []);

            // Guardar datos cuando cambien
            useEffect(() => {
                localStorage.setItem('rifaSoldNumbers', JSON.stringify(Array.from(soldNumbers)));
            }, [soldNumbers]);

            useEffect(() => {
                localStorage.setItem('rifaTicketData', JSON.stringify(ticketData));
            }, [ticketData]);

            useEffect(() => {
                localStorage.setItem('rifaAdmin', JSON.stringify(isAdmin));
            }, [isAdmin]);

            const toggleNumber = (num) => {
                if (soldNumbers.has(num) || pendingNumbers.has(num)) {
                    // Si ya est√° vendido, mostrar alerta en mobile
                    if (soldNumbers.has(num)) {
                        alert(`‚ùå El n√∫mero ${num.toString().padStart(3, '0')} ya est√° vendido`);
                    }
                    return;
                }
                
                const newSelected = new Set(selectedNumbers);
                if (newSelected.has(num)) {
                    newSelected.delete(num);
                } else {
                    newSelected.add(num);
                }
                setSelectedNumbers(newSelected);
            };

            const openForm = (num) => {
                setCurrentTicket(num);
                setShowForm(true);
                // Resetear formulario
                setFormData({
                    nombre: '',
                    apellido: '',
                    telefono: '',
                    email: ''
                });
            };

            const handleFormChange = (e) => {
                setFormData({
                    ...formData,
                    [e.target.name]: e.target.value
                });
            };

            const submitForm = (e) => {
                e.preventDefault();
                if (!formData.nombre || !formData.telefono) {
                    alert('Por favor completa al menos el nombre y tel√©fono');
                    return;
                }

                // Guardar datos del ticket
                const newTicketData = {
                    ...ticketData,
                    [currentTicket]: { 
                        ...formData,
                        fecha: new Date().toLocaleString('es-CO'),
                        numero: currentTicket,
                        timestamp: new Date().getTime()
                    }
                };
                setTicketData(newTicketData);

                // Marcar como vendido y quitar de pendientes/seleccionados
                const newSold = new Set(soldNumbers);
                newSold.add(currentTicket);
                setSoldNumbers(newSold);

                const newSelected = new Set(selectedNumbers);
                newSelected.delete(currentTicket);
                setSelectedNumbers(newSelected);

                const newPending = new Set(pendingNumbers);
                newPending.delete(currentTicket);
                setPendingNumbers(newPending);

                setShowForm(false);
                
                // Guardar √∫ltima venta para notificaci√≥n
                const saleInfo = {
                    numero: currentTicket,
                    cliente: formData.nombre + (formData.apellido ? ' ' + formData.apellido : ''),
                    telefono: formData.telefono,
                    timestamp: new Date().getTime()
                };
                setLastSale(saleInfo);
                
                // Enviar a tu WhatsApp y mostrar ticket al cliente
                sendToFranklinWhatsApp(currentTicket, formData);
                showClientTicket(currentTicket, formData);
            };

            const cancelForm = () => {
                setShowForm(false);
                // Si cancelan, quitar de pendientes pero mantener en seleccionados
                const newPending = new Set(pendingNumbers);
                newPending.delete(currentTicket);
                setPendingNumbers(newPending);
            };

            // ENVIAR A TU WHATSAPP (Franklin) - MEJORADO
            const sendToFranklinWhatsApp = (num, userData) => {
                const nombreCompleto = userData.nombre && userData.apellido 
                    ? `${userData.nombre} ${userData.apellido}`
                    : userData.nombre;

                const message = `üéüÔ∏è *NUEVA VENTA DE RIFA* üéüÔ∏è\n\n` +
                    `üë§ *Cliente:* ${nombreCompleto}\n` +
                    `üì± *Tel√©fono:* ${userData.telefono}\n` +
                    `üìß *Email:* ${userData.email || 'No proporcionado'}\n` +
                    `üïí *Fecha:* ${new Date().toLocaleString('es-CO')}\n\n` +
                    `üéØ *N√∫mero Vendido:* ${num.toString().padStart(3, '0')}\n` +
                    `üí∞ *Premio:* $1.000.000 COP\n` +
                    `üíµ *Valor Pagado:* $25.000 COP\n\n` +
                    `üìä *ESTAD√çSTICAS:*\n` +
                    `‚Ä¢ Vendidos: ${soldNumbers.size + 1}/100\n` +
                    `‚Ä¢ Disponibles: ${99 - soldNumbers.size}/100\n\n` +
                    `‚úÖ *VENTA CONFIRMADA*`;

                const url = `https://wa.me/573197118858?text=${encodeURIComponent(message)}`;
                window.open(url, '_blank');
            };

            // MOSTRAR TICKET AL CLIENTE
            const showClientTicket = (num, userData) => {
                setCurrentTicket(num);
                setShowTicket(true);
            };

            // COMPARTIR TICKET CLIENTE (para que el cliente lo comparta)
            const shareClientTicket = (num, userData = null) => {
                const userInfo = userData || ticketData[num] || {};
                const nombreCompleto = userInfo.nombre && userInfo.apellido 
                    ? `${userInfo.nombre} ${userInfo.apellido}`
                    : userInfo.nombre || 'Cliente';

                const message = `üéüÔ∏è *BOLETA OFICIAL - RIFA $1.000.000* üéüÔ∏è\n\n` +
                    `üë§ *Titular:* ${nombreCompleto}\n` +
                    `üì± *Tel√©fono:* ${userInfo.telefono || 'Registrado'}\n\n` +
                    `üéØ *Mi N√∫mero:* ${num.toString().padStart(3, '0')}\n` +
                    `üí∞ *Premio:* $1.000.000 COP\n` +
                    `üíµ *Valor:* $25.000 COP\n` +
                    `üé≤ *Sorteo:* Chance Pick 3 D√≠a\n` +
                    `üìÖ *Fecha:* 16 de Octubre\n\n` +
                    `üèÜ *Organiza:* Franklin Monsalve\n` +
                    `üìû *Contacto:* +57 3197118858\n\n` +
                    `‚úÖ *BOLETA REGISTRADA OFICIALMENTE*\n` +
                    `¬°Mucha suerte! üçÄ`;

                const url = `https://wa.me/?text=${encodeURIComponent(message)}`;
                window.open(url, '_blank');
            };

            const openNequi = () => {
                const whatsappUrl = 'https://wa.me/573197118858?text=Hola%20Franklin,%20quiero%20pagar%20mi%20boleta%20de%20rifa%20por%20Nequi';
                window.open(whatsappUrl, '_blank');
            };

            // SISTEMA DE ADMINISTRADOR
            const openAdminPanel = () => {
                setShowAdminPanel(true);
                setAdminPassword('');
            };

            const handleAdminLogin = (e) => {
                e.preventDefault();
                if (adminPassword === ADMIN_PASSWORD) {
                    setIsAdmin(true);
                    setShowAdminPanel(false);
                    alert('‚úÖ Acceso de administrador concedido');
                } else {
                    alert('‚ùå Contrase√±a incorrecta');
                    setAdminPassword('');
                }
            };

            // LIMPIAR TODOS LOS DATOS (solo admin)
            const clearAllData = () => {
                if (!isAdmin) {
                    alert('‚ùå Solo el administrador puede realizar esta acci√≥n');
                    return;
                }

                if (confirm('‚ö†Ô∏è ¬øEst√°s seguro de querer limpiar TODOS los datos de la rifa?\n\nEsto eliminar√°:\n‚Ä¢ Todos los n√∫meros vendidos\n‚Ä¢ Datos de clientes\n‚Ä¢ Historial de ventas\n\n¬°Esta acci√≥n NO se puede deshacer!')) {
                    localStorage.removeItem('rifaSoldNumbers');
                    localStorage.removeItem('rifaTicketData');
                    setSoldNumbers(new Set());
                    setTicketData({});
                    setSelectedNumbers(new Set());
                    setLastSale(null);
                    alert('‚úÖ Todos los datos han sido limpiados correctamente');
                }
            };

            // EXPORTAR DATOS (solo admin)
            const exportData = () => {
                if (!isAdmin) {
                    alert('‚ùå Solo el administrador puede realizar esta acci√≥n');
                    return;
                }

                const data = {
                    ventasTotales: soldNumbers.size,
                    numerosVendidos: Array.from(soldNumbers).sort((a, b) => a - b),
                    clientes: ticketData,
                    fechaExportacion: new Date().toLocaleString('es-CO')
                };

                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `rifa-datos-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            };

            // CERRAR SESI√ìN ADMIN
            const logoutAdmin = () => {
                setIsAdmin(false);
                alert('üîí Sesi√≥n de administrador cerrada');
            };

            const numbers = Array.from({ length: 100 }, (_, i) => i);

            return (
                <div className="p-3 sm:p-4">
                    {/* NOTIFICACI√ìN DE √öLTIMA VENTA */}
                    {lastSale && (
                        <div className="max-w-6xl mx-auto mb-4">
                            <div className="bg-green-500/20 backdrop-blur-lg rounded-xl p-3 border border-green-400/30 animate-pulse">
                                <p className="text-white font-bold text-center text-sm sm:text-base">
                                    üéâ ¬°NUEVA VENTA! N√∫mero {lastSale.numero.toString().padStart(3, '0')} - {lastSale.cliente}
                                </p>
                            </div>
                        </div>
                    )}

                    {/* Header - Optimizado para mobile */}
                    <div className="max-w-6xl mx-auto mb-6 sm:mb-8">
                        <div className="bg-white/10 backdrop-blur-lg rounded-2xl sm:rounded-3xl p-4 sm:p-6 border border-white/20 shadow-2xl">
                            <div className="text-center">
                                <h1 className="text-2xl sm:text-4xl font-bold text-white mb-2">üé∞ Gran Rifa üé∞</h1>
                                <div className="bg-gradient-to-r from-yellow-400 to-yellow-600 text-black font-bold text-xl sm:text-3xl py-2 sm:py-3 px-4 sm:px-6 rounded-xl sm:rounded-2xl inline-block mb-3 sm:mb-4 shadow-lg">
                                    $1.000.000 COP
                                </div>
                                <div className="grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mt-3 sm:mt-4 text-white">
                                    <div className="bg-white/10 rounded-lg sm:rounded-xl p-2 sm:p-3">
                                        <p className="text-xs sm:text-sm opacity-80">Valor Boleta</p>
                                        <p className="text-lg sm:text-2xl font-bold">$25.000</p>
                                    </div>
                                    <div className="bg-white/10 rounded-lg sm:rounded-xl p-2 sm:p-3">
                                        <p className="text-xs sm:text-sm opacity-80">Sorteo</p>
                                        <p className="text-sm sm:text-xl font-bold">Chance Pick 3</p>
                                    </div>
                                    <div className="bg-white/10 rounded-lg sm:rounded-xl p-2 sm:p-3">
                                        <p className="text-xs sm:text-sm opacity-80">Fecha</p>
                                        <p className="text-lg sm:text-2xl font-bold">16 Oct</p>
                                    </div>
                                </div>
                                <div className="mt-3 sm:mt-4 bg-white/10 rounded-lg sm:rounded-xl p-3">
                                    <p className="text-xs sm:text-sm text-white/80">Responsable</p>
                                    <p className="text-lg sm:text-xl font-bold text-white">Franklin Monsalve</p>
                                    <p className="text-base sm:text-lg text-yellow-300">+57 3197118858</p>
                                    <button
                                        onClick={openNequi}
                                        className="mt-2 sm:mt-3 w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-2 sm:py-3 px-4 sm:px-6 rounded-lg sm:rounded-xl transition-all shadow-lg hover:scale-105 text-sm sm:text-base"
                                    >
                                        üì± Pagar Nequi: 3197118858
                                    </button>
                                    
                                    {/* BOTONES DE ADMINISTRADOR */}
                                    <div className="mt-2 space-y-2">
                                        {!isAdmin ? (
                                            <button
                                                onClick={openAdminPanel}
                                                className="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg sm:rounded-xl transition-all text-xs sm:text-sm"
                                            >
                                                üîê Acceso Administrador
                                            </button>
                                        ) : (
                                            <div className="space-y-2">
                                                <button
                                                    onClick={clearAllData}
                                                    className="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg sm:rounded-xl transition-all text-xs sm:text-sm"
                                                >
                                                    üóëÔ∏è Limpiar Todos los Datos
                                                </button>
                                                <button
                                                    onClick={exportData}
                                                    className="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg sm:rounded-xl transition-all text-xs sm:text-sm"
                                                >
                                                    üìä Exportar Datos
                                                </button>
                                                <button
                                                    onClick={logoutAdmin}
                                                    className="w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg sm:rounded-xl transition-all text-xs sm:text-sm"
                                                >
                                                    üîí Cerrar Sesi√≥n
                                                </button>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* N√∫meros vendidos y seleccionados - Mobile optimizado */}
                    <div className="max-w-6xl mx-auto mb-4 sm:mb-6 space-y-3 sm:space-y-4">
                        {soldNumbers.size > 0 && (
                            <div className="bg-red-500/20 backdrop-blur-lg rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-red-400/30">
                                <p className="text-white font-semibold mb-2 text-sm sm:text-base">
                                    üîí Vendidos: {soldNumbers.size}/100
                                </p>
                                <div className="flex flex-wrap gap-1 sm:gap-2 max-h-20 overflow-y-auto">
                                    {Array.from(soldNumbers).sort((a, b) => a - b).map(num => {
                                        const clientData = ticketData[num];
                                        return (
                                            <span 
                                                key={num} 
                                                className="bg-red-500 text-white px-2 sm:px-3 py-1 rounded text-xs sm:text-sm font-bold"
                                            >
                                                {num.toString().padStart(3, '0')}
                                                {clientData && ' üë§'}
                                            </span>
                                        );
                                    })}
                                </div>
                            </div>
                        )}
                        
                        {selectedNumbers.size > 0 && (
                            <div className="bg-green-500/20 backdrop-blur-lg rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-green-400/30">
                                <p className="text-white font-semibold mb-2 text-sm sm:text-base">
                                    ‚úÖ Seleccionados: {selectedNumbers.size}
                                </p>
                                <div className="flex flex-wrap gap-1 sm:gap-2">
                                    {Array.from(selectedNumbers).sort((a, b) => a - b).map(num => (
                                        <span key={num} className="bg-green-500 text-white px-2 sm:px-3 py-1 rounded text-xs sm:text-sm font-bold">
                                            {num.toString().padStart(3, '0')}
                                        </span>
                                    ))}
                                </div>
                                <p className="text-white/70 text-xs sm:text-sm mt-2">
                                    ‚ö†Ô∏è Toca el bot√≥n del n√∫mero para registrarlo
                                </p>
                            </div>
                        )}

                        {pendingNumbers.size > 0 && (
                            <div className="bg-yellow-500/20 backdrop-blur-lg rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-yellow-400/30">
                                <p className="text-white font-semibold mb-2 text-sm sm:text-base">
                                    ‚è≥ En proceso: {pendingNumbers.size}
                                </p>
                                <div className="flex flex-wrap gap-1 sm:gap-2">
                                    {Array.from(pendingNumbers).sort((a, b) => a - b).map(num => (
                                        <span key={num} className="bg-yellow-500 text-white px-2 sm:px-3 py-1 rounded text-xs sm:text-sm font-bold">
                                            {num.toString().padStart(3, '0')}
                                        </span>
                                    ))}
                                </div>
                                <p className="text-white/70 text-xs sm:text-sm mt-2">
                                    üìù Completando formulario...
                                </p>
                            </div>
                        )}
                    </div>

                    {/* Grid de n√∫meros - OPTIMIZADO PARA MOBILE */}
                    <div className="max-w-6xl mx-auto">
                        <div className="grid grid-cols-5 gap-1 sm:gap-2 mb-6 sm:mb-8">
                            {numbers.map((num) => {
                                const isSelected = selectedNumbers.has(num);
                                const isSold = soldNumbers.has(num);
                                const isPending = pendingNumbers.has(num);
                                const hasData = ticketData[num];
                                
                                return (
                                    <div key={num} className="relative">
                                        <button
                                            onClick={() => toggleNumber(num)}
                                            disabled={isSold || isPending}
                                            className={`w-full number-button rounded-lg sm:rounded-xl font-bold text-sm sm:text-lg transition-all duration-200 ${
                                                isSold
                                                    ? 'bg-red-500/50 text-white cursor-not-allowed opacity-60'
                                                    : isPending
                                                    ? 'bg-yellow-500 text-white cursor-not-allowed shadow-lg'
                                                    : isSelected
                                                    ? 'bg-green-500 text-white shadow-lg scale-105'
                                                    : 'bg-white/90 text-purple-900 hover:bg-white hover:scale-105'
                                            } border-2 border-white/20 shadow-md aspect-square`}
                                        >
                                            {num.toString().padStart(3, '0')}
                                        </button>
                                        {isSelected && !isSold && !isPending && (
                                            <span className="absolute -top-1 -right-1 text-yellow-400 text-base sm:text-xl">‚úì</span>
                                        )}
                                        {isPending && (
                                            <span className="absolute -top-1 -right-1 text-yellow-300 text-base sm:text-xl">‚è≥</span>
                                        )}
                                        {isSold && hasData && (
                                            <div className="absolute -top-1 -right-1 bg-blue-500 text-white rounded-full w-4 h-4 sm:w-5 sm:h-5 flex items-center justify-center text-xs">
                                                üë§
                                            </div>
                                        )}
                                        {isSold && (
                                            <div className="absolute inset-0 flex items-center justify-center">
                                                <span className="text-xl sm:text-2xl">üîí</span>
                                            </div>
                                        )}
                                    </div>
                                );
                            })}
                        </div>
                    </div>

                    {/* Botones de env√≠o - Mobile optimizado */}
                    {selectedNumbers.size > 0 && (
                        <div className="max-w-6xl mx-auto">
                            <div className="bg-white/10 backdrop-blur-lg rounded-xl sm:rounded-2xl p-4 sm:p-6 border border-white/20">
                                <h3 className="text-white text-lg sm:text-xl font-bold mb-3 sm:mb-4 text-center">
                                    Registrar Boletas
                                </h3>
                                <p className="text-white/70 text-center mb-3 sm:mb-4 text-xs sm:text-sm">
                                    Toca el n√∫mero para completar los datos
                                </p>
                                <div className="grid grid-cols-2 sm:grid-cols-5 gap-2 sm:gap-3">
                                    {Array.from(selectedNumbers).sort((a, b) => a - b).map(num => (
                                        <button
                                            key={num}
                                            onClick={() => {
                                                const newPending = new Set(pendingNumbers);
                                                newPending.add(num);
                                                setPendingNumbers(newPending);
                                                openForm(num);
                                            }}
                                            className="bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold py-2 sm:py-3 px-2 sm:px-4 rounded-lg sm:rounded-xl transition-all shadow-lg hover:scale-105 text-sm sm:text-base"
                                        >
                                            üìù {num.toString().padStart(3, '0')}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Modal del formulario - OPTIMIZADO MOBILE */}
                    {showForm && (
                        <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-3 sm:p-4 z-50">
                            <div className="bg-white rounded-2xl sm:rounded-3xl p-4 sm:p-6 max-w-md w-full shadow-2xl mx-2">
                                <div className="text-center mb-4 sm:mb-6">
                                    <div className="text-3xl sm:text-4xl mb-2">üìù</div>
                                    <h2 className="text-xl sm:text-2xl font-bold text-purple-900">Registrar Boleta</h2>
                                    <p className="text-gray-600 text-sm sm:text-base">N√∫mero: <span className="font-bold text-xl sm:text-2xl text-purple-600">{currentTicket.toString().padStart(3, '0')}</span></p>
                                </div>
                                
                                <form onSubmit={submitForm} className="space-y-3 sm:space-y-4">
                                    <div>
                                        <label className="block text-xs sm:text-sm font-medium text-gray-700 mb-1">
                                            Nombre *
                                        </label>
                                        <input
                                            type="text"
                                            name="nombre"
                                            value={formData.nombre}
                                            onChange={handleFormChange}
                                            className="w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm sm:text-base"
                                            placeholder="Ingresa tu nombre"
                                            required
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-xs sm:text-sm font-medium text-gray-700 mb-1">
                                            Apellido
                                        </label>
                                        <input
                                            type="text"
                                            name="apellido"
                                            value={formData.apellido}
                                            onChange={handleFormChange}
                                            className="w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm sm:text-base"
                                            placeholder="Ingresa tu apellido"
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-xs sm:text-sm font-medium text-gray-700 mb-1">
                                            Tel√©fono/WhatsApp *
                                        </label>
                                        <input
                                            type="tel"
                                            name="telefono"
                                            value={formData.telefono}
                                            onChange={handleFormChange}
                                            className="w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm sm:text-base"
                                            placeholder="Ej: 3001234567"
                                            required
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-xs sm:text-sm font-medium text-gray-700 mb-1">
                                            Email
                                        </label>
                                        <input
                                            type="email"
                                            name="email"
                                            value={formData.email}
                                            onChange={handleFormChange}
                                            className="w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm sm:text-base"
                                            placeholder="tu@email.com"
                                        />
                                    </div>
                                    
                                    <div className="flex gap-2 sm:gap-3 pt-3 sm:pt-4">
                                        <button
                                            type="submit"
                                            className="flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-2 sm:py-3 px-3 sm:px-4 rounded-lg sm:rounded-xl transition-all text-sm sm:text-base"
                                        >
                                            üì§ Registrar
                                        </button>
                                        <button
                                            type="button"
                                            onClick={cancelForm}
                                            className="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 sm:py-3 px-3 sm:px-4 rounded-lg sm:rounded-xl transition-all text-sm sm:text-base"
                                        >
                                            ‚úï Cancelar
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    )}

                    {/* Modal de ADMINISTRADOR */}
                    {showAdminPanel && (
                        <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-3 sm:p-4 z-50">
                            <div className="bg-white rounded-2xl sm:rounded-3xl p-4 sm:p-6 max-w-md w-full shadow-2xl mx-2">
                                <div className="text-center mb-4 sm:mb-6">
                                    <div className="text-3xl sm:text-4xl mb-2">üîê</div>
                                    <h2 className="text-xl sm:text-2xl font-bold text-purple-900">Acceso Administrador</h2>
                                    <p className="text-gray-600 text-sm sm:text-base mt-2">
                                        Ingresa la contrase√±a de administrador
                                    </p>
                                </div>
                                
                                <form onSubmit={handleAdminLogin} className="space-y-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                            Contrase√±a
                                        </label>
                                        <input
                                            type="password"
                                            value={adminPassword}
                                            onChange={(e) => setAdminPassword(e.target.value)}
                                            className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500"
                                            placeholder="Ingresa la contrase√±a"
                                            required
                                        />
                                    </div>
                                    
                                    <div className="flex gap-3 pt-4">
                                        <button
                                            type="submit"
                                            className="flex-1 bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-4 rounded-xl transition-all"
                                        >
                                            üîì Acceder
                                        </button>
                                        <button
                                            type="button"
                                            onClick={() => setShowAdminPanel(false)}
                                            className="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-4 rounded-xl transition-all"
                                        >
                                            ‚úï Cancelar
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    )}

                    {/* Modal del ticket para el CLIENTE - OPTIMIZADO MOBILE */}
                    {showTicket && currentTicket !== null && (
                        <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-3 sm:p-4 z-50">
                            <div className="bg-white rounded-2xl sm:rounded-3xl p-4 sm:p-8 max-w-md w-full shadow-2xl mx-2 max-h-[90vh] overflow-y-auto">
                                <div className="text-center border-4 border-dashed border-green-500 rounded-xl sm:rounded-2xl p-4 sm:p-6">
                                    <div className="text-4xl sm:text-6xl mb-3 sm:mb-4">‚úÖ</div>
                                    <h2 className="text-xl sm:text-3xl font-bold text-green-600 mb-2">¬°BOLETA REGISTRADA!</h2>
                                    <div className="bg-gradient-to-r from-yellow-400 to-yellow-600 text-black text-3xl sm:text-6xl font-bold py-2 sm:py-4 rounded-xl sm:rounded-2xl my-3 sm:my-4">
                                        {currentTicket.toString().padStart(3, '0')}
                                    </div>
                                    
                                    {ticketData[currentTicket] && (
                                        <div className="text-left space-y-2 text-gray-800 mb-3 sm:mb-4">
                                            <p className="text-base sm:text-lg font-semibold">üë§ Titular:</p>
                                            <p className="text-lg sm:text-xl font-bold text-purple-700">
                                                {ticketData[currentTicket].nombre} 
                                                {ticketData[currentTicket].apellido && ` ${ticketData[currentTicket].apellido}`}
                                            </p>
                                            <p className="text-base sm:text-lg">üì± {ticketData[currentTicket].telefono}</p>
                                            {ticketData[currentTicket].email && (
                                                <p className="text-base sm:text-lg">üìß {ticketData[currentTicket].email}</p>
                                            )}
                                            <hr className="my-2 sm:my-3 border-gray-300" />
                                        </div>
                                    )}
                                    
                                    <div className="text-left space-y-2 text-gray-800">
                                        <p className="text-lg sm:text-2xl font-bold text-green-600">Premio: $1.000.000</p>
                                        <p className="text-base sm:text-lg">Valor: $25.000 COP</p>
                                        <p className="text-base sm:text-lg">Sorteo: Chance Pick 3</p>
                                        <p className="text-base sm:text-lg font-bold">Fecha: 16 Octubre</p>
                                        <hr className="my-2 sm:my-3 border-gray-300" />
                                        <div className="bg-purple-100 rounded-lg p-2 sm:p-3 mb-2">
                                            <p className="text-xs sm:text-sm font-semibold text-purple-900">üí≥ Pago Nequi:</p>
                                            <p className="text-lg sm:text-xl font-bold text-purple-600">3197118858</p>
                                        </div>
                                        <p className="text-xs sm:text-sm font-semibold">Organizador:</p>
                                        <p className="font-bold">Franklin Monsalve</p>
                                        <p className="text-purple-600 font-bold text-sm sm:text-base">+57 3197118858</p>
                                    </div>
                                </div>
                                <div className="flex gap-2 sm:gap-3 mt-4 sm:mt-6">
                                    <button
                                        onClick={() => shareClientTicket(currentTicket, ticketData[currentTicket])}
                                        className="flex-1 bg-green-500 hover:bg-green-600 text-white font-bold py-2 sm:py-3 px-3 sm:px-4 rounded-lg sm:rounded-xl transition-all text-sm sm:text-base"
                                    >
                                        üì§ Compartir
                                    </button>
                                    <button
                                        onClick={() => setShowTicket(false)}
                                        className="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 sm:py-3 px-3 sm:px-4 rounded-lg sm:rounded-xl transition-all text-sm sm:text-base"
                                    >
                                        ‚úÖ Listo
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.render(<TalonarioRifa />, document.getElementById('app'));
    </script>
</body>
</html>
